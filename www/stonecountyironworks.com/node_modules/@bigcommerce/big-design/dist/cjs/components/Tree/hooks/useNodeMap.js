"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useNodeMap = void 0;
var _react = require("react");
const getParentId = (nodeMap, id) => {
  const iterator = nodeMap.entries();
  for (const [, value] of iterator) {
    if (value.children && value.children.includes(id)) {
      return value.id;
    }
  }
};
const buildNodeMap = _ref => {
  let {
    nodes,
    nodeMap
  } = _ref;
  if (!nodes || nodes.length < 1) {
    return nodeMap;
  }
  return nodes.reduce((acc, node) => {
    const parent = getParentId(acc, node.id);
    acc.set(node.id, {
      children: node.children?.map(child => child.id) ?? [],
      id: node.id,
      parent
    });
    if (node.children && node.children.length > 0) {
      return buildNodeMap({
        nodes: node.children,
        nodeMap: acc
      });
    }
    return acc;
  }, nodeMap);
};
const useNodeMap = _ref2 => {
  let {
    nodes
  } = _ref2;
  return (0, _react.useMemo)(() => buildNodeMap({
    nodes,
    nodeMap: new Map()
  }), [nodes]);
};
exports.useNodeMap = useNodeMap;