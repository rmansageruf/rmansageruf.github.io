"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SelectAll = void 0;
var _react = _interopRequireDefault(require("react"));
var _Checkbox = require("../../Checkbox");
var _Flex = require("../../Flex");
var _Typography = require("../../Typography");
const SelectAll = _ref => {
  let {
    items = [],
    onChange,
    selectedItems,
    totalItems
  } = _ref;
  const allInPageSelected = items.length > 0 && items.every(item => selectedItems.has(item));
  const someInPageSelected = items.length > 0 && items.some(item => selectedItems.has(item));
  const handleSelectAll = () => {
    if (typeof onChange !== 'function') {
      return;
    }
    if (selectedItems.size === 0) {
      return onChange([...items]);
    }
    if (allInPageSelected) {
      const newSelectedItems = new Set(selectedItems);
      items.forEach(item => newSelectedItems.delete(item));
      return onChange([...newSelectedItems]);
    }
    return onChange([...new Set([...selectedItems, ...items])]);
  };
  if (typeof onChange !== 'function') {
    return null;
  }
  const totalSelectedItems = selectedItems.size;
  const label = allInPageSelected ? 'Deselect All' : 'Select All';
  return /*#__PURE__*/_react.default.createElement(_Flex.FlexItem, {
    flexShrink: 0,
    marginRight: "xxSmall"
  }, /*#__PURE__*/_react.default.createElement(_Flex.Flex, {
    flexDirection: "row"
  }, /*#__PURE__*/_react.default.createElement(_Checkbox.Checkbox, {
    checked: allInPageSelected,
    hiddenLabel: true,
    isIndeterminate: someInPageSelected,
    label: label,
    onChange: handleSelectAll
  }), /*#__PURE__*/_react.default.createElement(_Typography.Text, {
    marginLeft: "small"
  }, totalSelectedItems === 0 ? `${totalItems}` : `${totalSelectedItems}/${totalItems}`)));
};
exports.SelectAll = SelectAll;